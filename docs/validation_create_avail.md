–¢—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥–º–µ—Ç–∏–ª –ø—Ä–æ–±–ª–µ–º—É: –µ—Å–ª–∏ —É –Ω–∞—Å **recurrence rules**, —Ç–æ availability –∑–∞–¥–∞—ë—Ç **–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤, –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å "–≤ –ª–æ–±" –Ω–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –¥–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –¥–∞—Ç—ã. –í–æ—Ç —Ä–∞–∑–±–æ—Ä –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤:

---

### ‚úÖ –¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥: ¬´–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ¬ª

#### –°—É—Ç—å:

1. **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—à—å** –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –¥–ª—è –Ω–æ–≤–æ–≥–æ `availability` ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ **1 –≥–æ–¥ –≤–ø–µ—Ä—ë–¥**.
2. **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—à—å** –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –≤ –ë–î ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, **–Ω–∞ 2 –≥–æ–¥–∞** (–≥–æ–¥ –Ω–∞–∑–∞–¥ –∏ –≥–æ–¥ –≤–ø–µ—Ä—ë–¥).
3. **–ü—Ä–æ–≤–µ—Ä—è–µ—à—å –Ω–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è** (–ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø–æ –¥–Ω—è–º).

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

* –ü—Ä–æ—Å—Ç–æ–π –∏ —Ç–æ—á–Ω—ã–π —Å–ø–æ—Å–æ–±.
* –õ–µ–≥–∫–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è.
* –î–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ç–æ—á–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å, *–≥–¥–µ –∏–º–µ–Ω–Ω–æ* –ø—Ä–æ–∏–∑–æ—à–ª–æ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ.

#### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:

* –ù–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç "–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ" –±—É–¥—É—â–µ–µ.
* –ú–æ–≥—É—Ç –±—ã—Ç—å –ª–æ–∂–Ω—ã–µ ¬´–æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞¬ª, –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ –ø–æ—Å—Ç–∞–≤–∏–ª `recurrence_rule.until = null`.

---

### üß† –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã

#### 1. **–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è**

–ï—Å–ª–∏ –æ–±–∞ `availability` –∏—Å–ø–æ–ª—å–∑—É—é—Ç recurrence ‚Äî –º–æ–∂–Ω–æ **–ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è –ª–∏ –∏—Ö –ø—Ä–∞–≤–∏–ª–∞, –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—è –≤—Å–µ –¥–∞—Ç—ã**.

##### –ü—Ä–∏–º–µ—Ä:

* –û–¥–∏–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∂–¥—É—é —Å—É–±–±–æ—Ç—É 10:00‚Äì12:00.
* –î—Ä—É–≥–æ–π –∫–∞–∂–¥—É—é —Å—É–±–±–æ—Ç—É 11:00‚Äì13:00.
* –ï—Å–ª–∏ `byweekday` –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –≤—Ä–µ–º–µ–Ω–∏ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è ‚Äî –æ–Ω–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç.

##### –ú–æ–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å:

* `byweekday`: –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è –ª–∏?
* `start_time`, `end_time`: –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è –ª–∏ (–≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –¥–Ω—è)?
* `dtstart`, `until`: –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è –ª–∏ –¥–∞—Ç—ã –¥–µ–π—Å—Ç–≤–∏—è?

##### –ü—Ä–æ–±–ª–µ–º–∞:

* –≠—Ç–æ —Å–ª–æ–∂–Ω–æ, –æ—Å–æ–±–µ–Ω–Ω–æ —Å `bymonthday`, `bysetpos`, `interval ‚â† 1`, `frequency = MONTHLY`.
* –ë–µ–∑ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–∫—Ä—ã—Ç—å **–≤—Å–µ** edge-case.

üìå –í—ã–≤–æ–¥: —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è **–ø—Ä–æ—Å—Ç—ã—Ö WEEKLY-–ø—Ä–∞–≤–∏–ª —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º**.

---

#### 2. **–ü–æ–∏—Å–∫ –ø–æ –∏–Ω–¥–µ–∫—Å—É/–±–∏—Ç–º–∞–ø–∞–º (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ)**

–ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–º–µ–µ—Ç –±–æ–ª—å—à—É—é –Ω–∞–≥—Ä—É–∑–∫—É, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å **–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –∏–ª–∏ –∫—ç—à**, –≤ –∫–æ—Ç–æ—Ä–æ–π —Ö—Ä–∞–Ω—è—Ç—Å—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ **—Å–ª–æ—Ç—ã –≤—Ä–µ–º–µ–Ω–∏** –Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–∫–Ω–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2 –≥–æ–¥–∞). –¢–æ–≥–¥–∞:

* –ù–æ–≤—ã–π —Å–ª–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ –Ω–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ —Å —ç—Ç–∏–º–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å–ª–æ—Ç–∞–º–∏.
* –ú–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∫—ç—à –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø—Ä–∞–≤–∏–ª.
* –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –∑–∞–ø—Ä–æ—Å—ã: ¬´–µ—Å—Ç—å –ª–∏ —Å–≤–æ–±–æ–¥–Ω–æ–µ –æ–∫–Ω–æ –≤ –ø–µ—Ä–∏–æ–¥–µ X?¬ª.

üìå –í—ã–≤–æ–¥: —Å–ª–æ–∂–Ω–æ, –Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å —á–∞—Å—Ç—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ.

---

### üö´ –ß—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

* **–°—Ä–∞–≤–Ω–∏–≤–∞—Ç—å `recurrence_rule` –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏** ‚Äî –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ.
* **–ù–∞–¥–µ—è—Ç—å—Å—è, —á—Ç–æ `until` –≤—Å–µ–≥–¥–∞ –∑–∞–¥–∞–Ω** ‚Äî –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ.
* **–ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª** ‚Äî –¥–∞—Å—Ç –ª–æ–∂–Ω—ã–µ ¬´–û–ö¬ª.

---

### ‚ú® –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

–ù–∞ —Ç–µ–∫—É—â–µ–º —ç—Ç–∞–ø–µ:

#### ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π **–≥–µ–Ω–µ—Ä–∞—Ü–∏—é –Ω–∞ 1‚Äì2 –≥–æ–¥–∞ –≤–ø–µ—Ä—ë–¥**, –∫–∞–∫ —Ç—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–∏–ª:

1. **–ù–æ–≤—ã–π `availability`:**

   * –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –Ω–∞ –±–ª–∏–∂–∞–π—à–∏–π –≥–æ–¥ (—Å–µ–π—á–∞—Å ‚Üí +12 –º–µ—Å).
2. **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ `availability`:**

   * –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –æ—Ç `(min(dtstart, now - 12 –º–µ—Å))` –¥–æ `now + 12 –º–µ—Å`.
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –ø–æ –¥–∞—Ç–∞–º –∏ –≤—Ä–µ–º–µ–Ω–∏.**

–ú–æ–∂–Ω–æ –ø–æ—Ç–æ–º –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `recurrenceEndEffective` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `dtstart + interval * count`), —á—Ç–æ–±—ã –∑–Ω–∞—Ç—å, –¥–æ –∫–∞–∫–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –ø—Ä–∞–≤–∏–ª–æ –∞–∫—Ç–∏–≤–Ω–æ.

---

–•–æ—á–µ—à—å ‚Äî –º–æ–≥—É –ø–æ–º–æ—á—å –Ω–∞–ø–∏—Å–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º dayjs –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤.


# GROK
–í–∞—à –≤–æ–ø—Ä–æ—Å –∫–∞—Å–∞–µ—Ç—Å—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ `Availability` –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∑–∞–ø–∏—Å—è–º–∏ `Availability` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –µ–≥–æ —Å–æ–∑–¥–∞–Ω–∏–∏. –§–æ—Ä–º–∞—Ç `Availability` –≤–∫–ª—é—á–∞–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤—Ä–µ–º–µ–Ω–∏ (`start_time`, `end_time`, `duration_minutes`) –∏, –≤–æ–∑–º–æ–∂–Ω–æ, –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–µ—Å—è –ø—Ä–∞–≤–∏–ª–æ (`recurrence_rule`). –í—ã –ø—Ä–µ–¥–ª–æ–∂–∏–ª–∏ –æ–¥–∏–Ω –ø–æ–¥—Ö–æ–¥: —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –¥–ª—è –Ω–æ–≤–æ–≥–æ `Availability` –Ω–∞ –≥–æ–¥ –≤–ø–µ—Ä—ë–¥, –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö ‚Äî –Ω–∞ –¥–≤–∞ –≥–æ–¥–∞ (—Å —É—á—ë—Ç–æ–º –≥–æ–¥–∞ –Ω–∞–∑–∞–¥ –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏), –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è. –Ø –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É—é —ç—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥, –ø—Ä–µ–¥–ª–æ–∂—É –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–µ–ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –Ω–∞ –ª—é–±–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª, –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –≤–∞—à–µ–º—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–Ω—Ç–µ—Ä–≤–∞–ª `00:00`‚Äì`01:00` –≤ `Europe/Moscow`, –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–π—Å—è –ø–æ —Å—É–±–±–æ—Ç–∞–º –∏ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å—è–º).

---

### 1. **–ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∞**

#### –§–æ—Ä–º–∞—Ç `Availability`
```json
{
  "id": "deffb4e4-59f4-4d1b-8bcf-7c9b02404646",
  "venueId": null,
  "spaceId": "944c3959-0f4c-4286-be30-1eb7c72dc76d",
  "timezone": "Europe/Moscow",
  "rules": {
    "interval": {
      "end_time": "01:00",
      "start_time": "00:00",
      "valid_from": "2025-05-03T00:00:00",
      "valid_from_utc": "2025-05-02T21:00:00.000Z",
      "duration_minutes": 60
    },
    "recurrence_rule": {
      "until": null,
      "dtstart": "2025-05-02T21:00:00.000Z",
      "interval": 1,
      "byweekday": ["SA", "SU"],
      "frequency": "WEEKLY"
    }
  },
  "createdAt": "2025-05-02T11:57:07.406Z",
  "updatedAt": "2025-05-02T11:57:07.406Z"
}
```

- **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è**:
  - `spaceId` –∏–ª–∏ `venueId`: –£–∫–∞–∑—ã–≤–∞–µ—Ç, –∫ –∫–∞–∫–æ–º—É –æ–±—ä–µ–∫—Ç—É –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å.
  - `timezone`: –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Europe/Moscow`).
  - `rules.interval`: –í—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª (`start_time`, `end_time`, `duration_minutes`, `valid_from_utc`).
  - `rules.recurrence_rule`: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è (`dtstart`, `frequency`, `byweekday`, `until`, `interval`).
- **–°–µ–º–∞–Ω—Ç–∏–∫–∞**:
  - –ò–Ω—Ç–µ—Ä–≤–∞–ª –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –≤ `start_time` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `00:00`) –∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –≤ `end_time` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `01:00`) –≤ —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ `timezone`.
  - –ü–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è `recurrence_rule` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ –ø–æ —Å—É–±–±–æ—Ç–∞–º –∏ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å—è–º).
  - –ï—Å–ª–∏ `recurrence_rule` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, —ç—Ç–æ —Ä–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª.

#### –í–∞—à –ø–æ–¥—Ö–æ–¥
1. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –¥–ª—è –Ω–æ–≤–æ–≥–æ `Availability`**:
   - –°–æ–∑–¥–∞—ë—Ç—Å—è `RRule` —Å `dtstart` –∏ –¥—Ä—É–≥–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.
   - –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤—Å–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –Ω–∞ –≥–æ–¥ –≤–ø–µ—Ä—ë–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç `2025-05-03` –¥–æ `2026-05-03`).
   - –ö–∞–∂–¥—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª: `[startDateTime, endDateTime]` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `2025-05-03T00:00:00+03:00` ‚Äì `2025-05-03T01:00:00+03:00`).

2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö `Availability`**:
   - –î–ª—è –≤—Å–µ—Ö `Availability` —Å —Ç–µ–º –∂–µ `spaceId` –∏–ª–∏ `venueId` –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –Ω–∞ –¥–≤–∞ –≥–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç `dtstart - 1 –≥–æ–¥` –¥–æ `dtstart + 1 –≥–æ–¥`).
   - –≠—Ç–æ —É—á–∏—Ç—ã–≤–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥–ª–∏ –Ω–∞—á–∞—Ç—å—Å—è —Ä–∞–Ω—å—à–µ.

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π**:
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –Ω–æ–≤–æ–≥–æ `Availability` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è –ª–∏ –æ–Ω —Å –ª—é–±—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö `Availability`.
   - –ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ: –µ—Å–ª–∏ `[start1, end1]` –∏ `[start2, end2]` –∏–º–µ—é—Ç –æ–±—â–∏–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π –æ—Ç—Ä–µ–∑–æ–∫ (`start1 <= end2 && start2 <= end1`).

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –≤–∞—à–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∞
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –õ–µ–≥–∫–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `RRule` –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π.
- **–ü–æ–ª–Ω–æ—Ç–∞**: –£—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –≤ –∑–∞–¥–∞–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ.
- **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞ –¥–≤–∞ –≥–æ–¥–∞ (—Å –≥–æ–¥–æ–º –Ω–∞–∑–∞–¥) –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–ª—É—á–∞–µ–≤, –≤–∫–ª—é—á–∞—è —Å—Ç–∞—Ä—ã–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã.

#### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏
1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**:
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –Ω–∞ –≥–æ–¥/–¥–≤–∞ –≥–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö `Availability` –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞—Ç—Ä–∞—Ç–Ω–æ–π, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –∏—Ö –º–Ω–æ–≥–æ –∏–ª–∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è —á–∞—Å—Ç—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ).
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –¥–ª—è —Ç—ã—Å—è—á –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ —Ç—Ä–µ–±—É–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.

2. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –≥–æ—Ä–∏–∑–æ–Ω—Ç**:
   - –ï—Å–ª–∏ —É –Ω–æ–≤–æ–≥–æ –∏–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ `Availability` –Ω–µ—Ç `until` –∏–ª–∏ `count`, –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–º–∏. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ –≥–æ–¥–∞ –≤–ø–µ—Ä—ë–¥ –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –≤ –±—É–¥—É—â–µ–º.

3. **–°–ª–æ–∂–Ω–æ—Å—Ç—å —Å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–º–∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è–º–∏**:
   - –ë–µ–∑ `until` –∏–ª–∏ `count` –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞.

4. **–ß–∞—Å–æ–≤—ã–µ –ø–æ—è—Å–∞**:
   - –ù—É–∂–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å `timezone` –∫–∞–∂–¥–æ–≥–æ `Availability`, —Ç–∞–∫ –∫–∞–∫ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –º–æ–≥—É—Ç –±—ã—Ç—å –≤ —Ä–∞–∑–Ω—ã—Ö —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–∞—Ö.

---

### 2. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏**

–ß—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–µ–ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –Ω–∞ **–ª—é–±–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª** (–≤–∫–ª—é—á–∞—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è), —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É—é—Ç –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –∏ –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ —Å–ª—É—á–∞–∏.

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
**–ò–¥–µ—è**:
- –í–º–µ—Å—Ç–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π (`recurrence_rule`) –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –≤—Ä–µ–º–µ–Ω–∏ (`start_time`, `end_time`) –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏.
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ `Availability` –ø—Ä–æ–≤–µ—Ä—è—Ç—å, –º–æ–≥—É—Ç –ª–∏ –µ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –ø–µ—Ä–µ—Å–µ–∫–∞—Ç—å—Å—è —Å –Ω–æ–≤—ã–º `Availability` –Ω–∞ –æ—Å–Ω–æ–≤–µ:
  - –°–æ–≤–ø–∞–¥–µ–Ω–∏—è –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏ (`byweekday`).
  - –ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ (`start_time`, `end_time`).
  - –ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –¥–∞—Ç (`dtstart`, `until`).

**–®–∞–≥–∏**:
1. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `spaceId`/`venueId`**:
   - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ `Availability` —Å —Ç–µ–º –∂–µ `spaceId` –∏–ª–∏ `venueId`.

2. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–∞—Ç**:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è –ª–∏ –¥–∏–∞–ø–∞–∑–æ–Ω—ã `[dtstart, until]` (–∏–ª–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ, –µ—Å–ª–∏ `until` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç).

3. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏**:
   - –ï—Å–ª–∏ –æ–±–∞ `Availability` –∏–º–µ—é—Ç `byweekday`, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ –æ–±—â–∏–µ –¥–Ω–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `["SA", "SU"]` –∏ `["SU", "MO"]` –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è –≤ `SU`).

4. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏**:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è –ª–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã `[start_time, end_time]` –≤ –æ–±—â–∏–µ –¥–Ω–∏.
   - –ü—Ä–∏–º–µ—Ä: `[00:00, 01:00]` –∏ `[00:30, 01:30]` –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è.

5. **–£—á—ë—Ç —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤**:
   - –ü—Ä–∏–≤–µ—Å—Ç–∏ `start_time` –∏ `end_time` –∫ UTC —Å —É—á—ë—Ç–æ–º `timezone`.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ë—ã—Å—Ç—Ä–µ–µ, —Ç–∞–∫ –∫–∞–∫ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤.
- –†–∞–±–æ—Ç–∞–µ—Ç —Å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–º–∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è–º–∏, –µ—Å–ª–∏ –ø—Ä–∞–≤–∏–ª–∞ —Å–æ–≤–ø–∞–¥–∞—é—Ç.
- –ú–µ–Ω—å—à–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –¥–ª—è —Ä–µ–¥–∫–∏—Ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã—Ö).

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- –°–ª–æ–∂–Ω–µ–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, `bymonthday`, `bysetpos`).
- –ù–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç –ø–æ –¥–Ω—è–º, –Ω–æ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è –∏–∑-–∑–∞ —Ä–∞–∑–Ω—ã—Ö —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤ –∏–ª–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤, –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏—Ö —á–µ—Ä–µ–∑ –ø–æ–ª—É–Ω–æ—á—å.

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–µ —Å –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–º –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º
**–ò–¥–µ—è**:
- –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à –ø–æ–¥—Ö–æ–¥ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥) —Å –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π –¥–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π.
- –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –Ω–∞ —Ä–∞–∑—É–º–Ω—ã–π –ø–µ—Ä–∏–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1 –≥–æ–¥) –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Å–ª—É—á–∞–µ–≤ –±–µ–∑ `until`.

**–®–∞–≥–∏**:
1. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤**:
   - –î–ª—è –Ω–æ–≤–æ–≥–æ `Availability`: –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –æ—Ç `dtstart` –¥–æ `dtstart + 1 –≥–æ–¥` (–∏–ª–∏ –¥–æ `until`).
   - –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö `Availability`: –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –æ—Ç `min(dtstart, new_dtstart) - 1 –≥–æ–¥` –¥–æ `max(until, new_dtstart + 1 –≥–æ–¥)`.

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π**:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤.

3. **–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π**:
   - –ï—Å–ª–∏ —É –Ω–æ–≤–æ–≥–æ –∏–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ `Availability` –Ω–µ—Ç `until` –∏–ª–∏ `count`, —Å—Ä–∞–≤–Ω–∏—Ç—å:
     - –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ `frequency` –∏ `interval`.
     - –û–±—â–∏–µ –¥–Ω–∏ –≤ `byweekday`.
     - –ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ `[start_time, end_time]` –≤ UTC.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ü–æ–∫—Ä—ã–≤–∞–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–ª—É—á–∞–µ–≤ —Å —Ä–∞–∑—É–º–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é.
- –£—á–∏—Ç—ã–≤–∞–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏.
- –ë–æ–ª–µ–µ –Ω–∞–¥—ë–∂–µ–Ω, —á–µ–º —Ç–æ–ª—å–∫–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤.

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- –¢—Ä–µ–±—É–µ—Ç –¥–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è + –∞–Ω–∞–ª–∏—Ç–∏–∫–∞).
- –°–ª–æ–∂–Ω–µ–µ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

#### –í–∞—Ä–∏–∞–Ω—Ç 3: –•—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
**–ò–¥–µ—è**:
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ `Availability` –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤—Å–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã (–∏–ª–∏ –∏—Ö —á–∞—Å—Ç—å) –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `AvailabilityIntervals`).
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é SQL-–∑–∞–ø—Ä–æ—Å–∞.

**–®–∞–≥–∏**:
1. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã**:
   ```sql
   CREATE TABLE AvailabilityIntervals (
     id UUID PRIMARY KEY,
     availabilityId UUID REFERENCES Availability(id),
     startDateTime TIMESTAMP WITH TIME ZONE,
     endDateTime TIMESTAMP WITH TIME ZONE,
     spaceId UUID,
     venueId UUID
   );
   ```

2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤**:
   - –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ `Availability` –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5 –ª–µ—Ç) –∏–ª–∏ –¥–æ `until` –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ `AvailabilityIntervals`.

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π**:
   - –í—ã–ø–æ–ª–Ω–∏—Ç—å SQL-–∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏—Ö—Å—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤:
     ```sql
     SELECT 1
     FROM AvailabilityIntervals
     WHERE spaceId = :spaceId
       AND (
         (:newStartDateTime <= endDateTime AND :newEndDateTime >= startDateTime)
       )
     LIMIT 1;
     ```

4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π**:
   - –î–ª—è `Availability` –±–µ–∑ `until` —Ö—Ä–∞–Ω–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏—Ö –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π —á–µ—Ä–µ–∑ SQL.
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö.
- –£–ø—Ä–æ—â–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –¥–ª—è –∫–æ–Ω–µ—á–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤.

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- –¢—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏.
- –°–ª–æ–∂–Ω–æ—Å—Ç—å —Å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–º–∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è–º–∏.
- –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –æ–±—ä—ë–º —Ö—Ä–∞–Ω–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

#### –í–∞—Ä–∏–∞–Ω—Ç 4: –í—Ä–µ–º–µ–Ω–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏ –ª–µ–Ω–∏–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
**–ò–¥–µ—è**:
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã—Ö –¥–∞—Ç –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `findIntervalsByDateRange`, –∞ –Ω–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ `Availability`.
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ `Availability` –≤—ã–ø–æ–ª–Ω—è—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å `timezone`, `dtstart`, `interval`).

**–®–∞–≥–∏**:
1. **–°–æ–∑–¥–∞–Ω–∏–µ `Availability`**:
   - –°–æ—Ö—Ä–∞–Ω—è—Ç—å `Availability` –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π.
   - –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç –∏ –ª–æ–≥–∏—á–µ—Å–∫—É—é –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, `start_time < end_time`).

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ**:
   - –í `findIntervalsByDateRange` –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –¥–ª—è –≤—Å–µ—Ö `Availability` —Å —Ç–µ–º –∂–µ `spaceId`/`venueId` –≤ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ.
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –º–µ–∂–¥—É –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏ –≤ –ø–∞–º—è—Ç–∏.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –£–ø—Ä–æ—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ `Availability`.
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –≥–¥–µ –∑–∞–ø—Ä–æ—Å—ã –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ —Ä–µ–¥–∫–∏.

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- –ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏.
- –ù–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏—Ö `Availability`.

---

### 3. **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥**

–£—á–∏—Ç—ã–≤–∞—è –≤–∞—à –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–µ–ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –Ω–∞ **–ª—é–±–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª**, —è —Ä–µ–∫–æ–º–µ–Ω–¥—É—é **–í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–µ —Å –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–º –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º**. –≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥:
- –ë–∞–ª–∞–Ω—Å–∏—Ä—É–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –ø–æ–ª–Ω–æ—Ç—É.
- –ü–æ–∫—Ä—ã–≤–∞–µ—Ç –∫–æ–Ω–µ—á–Ω—ã–µ –∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è.
- –°–æ–≤–º–µ—Å—Ç–∏–º —Å –≤–∞—à–∏–º —Ç–µ–∫—É—â–∏–º –∫–æ–¥–æ–º (`RRule`, `dayjs`).

**–ü–æ—á–µ–º—É**:
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –Ω–∞ –≥–æ–¥ –≤–ø–µ—Ä—ë–¥ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö —Å–ª—É—á–∞–µ–≤.
- –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –≤ –±—É–¥—É—â–µ–º.
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –í–∞—Ä–∏–∞–Ω—Ç–∞ 3).
- –ë–æ–ª–µ–µ –Ω–∞–¥—ë–∂–µ–Ω, —á–µ–º –ª–µ–Ω–∏–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–í–∞—Ä–∏–∞–Ω—Ç 4).

---

### 4. **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**

–Ø –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—é –º–µ—Ç–æ–¥ `validateAvailability` –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ `Availability` –Ω–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏. –ú–µ—Ç–æ–¥ –±—É–¥–µ—Ç:
- –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –Ω–∞ –≥–æ–¥ –¥–ª—è –Ω–æ–≤–æ–≥–æ `Availability`.
- –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö `Availability` –Ω–∞ –¥–≤–∞ –≥–æ–¥–∞ (–æ—Ç `dtstart - 1 –≥–æ–¥` –¥–æ `dtstart + 1 –≥–æ–¥`).
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤.
- –î–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π –≤—ã–ø–æ–ª–Ω—è—Ç—å –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É.

```typescript
import { BadRequestException, Injectable } from '@nestjs/common';
import { PrismaService } from 'nestjs-prisma';
import * as dayjs from 'dayjs';
import * as utc from 'dayjs/plugin/utc';
import * as timezone from 'dayjs/plugin/timezone';
import { RRule, Options } from 'rrule';

dayjs.extend(utc);
dayjs.extend(timezone);

enum RecurrenceFrequency {
  DAILY = 'DAILY',
  WEEKLY = 'WEEKLY',
  MONTHLY = 'MONTHLY',
}

interface Interval {
  startDateTime: dayjs.Dayjs;
  endDateTime: dayjs.Dayjs;
}

interface RecurrenceRule {
  dtstart: string;
  until?: string | null;
  frequency: RecurrenceFrequency;
  interval: number;
  count?: number;
  byweekday?: string[];
  bysetpos?: number[];
  bymonthday?: number[];
}

interface AvailabilityInterval {
  start_time: string;
  end_time: string;
  duration_minutes: number;
  valid_from: string;
  valid_from_utc: string;
}

interface Availability {
  id: string;
  venueId?: string;
  spaceId?: string;
  timezone: string;
  rules: {
    interval: AvailabilityInterval;
    recurrence_rule?: RecurrenceRule;
  };
}

@Injectable()
export class AvailabilityService {
  constructor(private prisma: PrismaService) {}

  private dayjsToDatetime(dayjsObj: dayjs.Dayjs): Date {
    return dayjsObj.toDate();
  }

  async validateAvailability(newAvailability: Availability): Promise<void> {
    const { venueId, spaceId, timezone, rules } = newAvailability;
    const { interval, recurrence_rule } = rules;

    // –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    if (!venueId && !spaceId) {
      throw new BadRequestException('Either venueId or spaceId must be provided');
    }
    if (venueId && spaceId) {
      throw new BadRequestException('Only one of venueId or spaceId can be provided');
    }
    if (!dayjs.tz.zone(timezone)) {
      throw new BadRequestException(`Invalid timezone: ${timezone}`);
    }
    if (!dayjs(interval.valid_from_utc).isValid()) {
      throw new BadRequestException('Invalid valid_from_utc');
    }
    if (interval.duration_minutes <= 0) {
      throw new BadRequestException('Duration must be positive');
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö Availability
    const whereClause = venueId ? { venueId } : { spaceId };
    const existingAvailabilities = await this.prisma.availability.findMany({
      where: whereClause,
    });

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –¥–ª—è –Ω–æ–≤–æ–≥–æ Availability
    const newIntervals = this.generateIntervals(newAvailability, 1); // 1 –≥–æ–¥ –≤–ø–µ—Ä—ë–¥

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ Availability
    for (const existing of existingAvailabilities) {
      // –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å, –µ—Å–ª–∏ —ç—Ç–æ —Ç–æ—Ç –∂–µ Availability (–ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏)
      if (existing.id === newAvailability.id) {
        continue;
      }

      // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ Availability
      const existingIntervals = this.generateIntervals(existing, 2, true); // 2 –≥–æ–¥–∞, –≤–∫–ª—é—á–∞—è –≥–æ–¥ –Ω–∞–∑–∞–¥

      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
      for (const newInterval of newIntervals) {
        for (const existingInterval of existingIntervals) {
          if (
            newInterval.startDateTime.isBefore(existingInterval.endDateTime) &&
            newInterval.endDateTime.isAfter(existingInterval.startDateTime)
          ) {
            throw new BadRequestException(
              `New availability intersects with existing availability ${existing.id} at ${newInterval.startDateTime.toISOString()}`,
            );
          }
        }
      }

      // –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
      if (
        (!recurrence_rule?.until && !recurrence_rule?.count) ||
        (!existing.rules.recurrence_rule?.until && !existing.rules.recurrence_rule?.count)
      ) {
        await this.checkInfiniteIntersections(newAvailability, existing);
      }
    }
  }

  private generateIntervals(
    availability: Availability,
    yearsForward: number,
    includeYearBack: boolean = false,
  ): Interval[] {
    const { rules, timezone } = availability;
    const { interval, recurrence_rule } = rules;
    const intervals: Interval[] = [];

    const [startHour, startMinute] = interval.start_time.split(':').map(Number);
    const [endHour, endMinute] = interval.end_time.split(':').map(Number);

    if (!recurrence_rule) {
      // –†–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª
      const startDateTime = dayjs.utc(interval.valid_from_utc).tz(timezone);
      const endDateTime = startDateTime.add(interval.duration_minutes, 'minute');
      intervals.push({ startDateTime, endDateTime });
      return intervals;
    }

    // –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
    const dtstart = dayjs.utc(recurrence_rule.dtstart);
    const start = includeYearBack ? dtstart.subtract(1, 'year') : dtstart;
    const end = dtstart.add(yearsForward, 'year');

    const rruleOptions: Partial<Options> = {
      freq:
        recurrence_rule.frequency === RecurrenceFrequency.DAILY
          ? RRule.DAILY
          : recurrence_rule.frequency === RecurrenceFrequency.MONTHLY
          ? RRule.MONTHLY
          : RRule.WEEKLY,
      tzid: timezone,
      dtstart: this.dayjsToDatetime(dtstart),
      byweekday: recurrence_rule.byweekday?.map(
        (day) =>
          ({
            MO: RRule.MO,
            TU: RRule.TU,
            WE: RRule.WE,
            TH: RRule.TH,
            FR: RRule.FR,
            SA: RRule.SA,
            SU: RRule.SU,
          })[day],
      ),
      until: recurrence_rule.until
        ? this.dayjsToDatetime(dayjs.utc(recurrence_rule.until))
        : null,
      interval: recurrence_rule.interval,
      count: recurrence_rule.count,
      bysetpos: recurrence_rule.bysetpos,
      bymonthday: recurrence_rule.bymonthday,
    };

    const rule = new RRule(rruleOptions);
    const dates = rule.between(
      start.tz(timezone).toDate(),
      end.tz(timezone).toDate(),
      true,
    );

    dates.forEach((date) => {
      const baseDate = dayjs(date).tz(timezone);
      const startDateTime = baseDate
        .hour(startHour)
        .minute(startMinute)
        .second(0)
        .millisecond(0);
      const endDateTime = baseDate
        .hour(endHour)
        .minute(endMinute)
        .second(0)
        .millisecond(0);

      intervals.push({ startDateTime, endDateTime });
    });

    return intervals;
  }

  private async checkInfiniteIntersections(
    newAvailability: Availability,
    existingAvailability: Availability,
  ): Promise<void> {
    const newRules = newAvailability.rules.recurrence_rule;
    const existingRules = existingAvailability.rules.recurrence_rule;

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è Availability
    if (!newRules || !existingRules) {
      return;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è frequency –∏ interval
    if (
      newRules.frequency !== existingRules.frequency ||
      newRules.interval !== existingRules.interval
    ) {
      return;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—â–∏—Ö –¥–Ω–µ–π –≤ byweekday
    const newDays = new Set(newRules.byweekday || []);
    const existingDays = new Set(existingRules.byweekday || []);
    const commonDays = [...newDays].filter((day) => existingDays.has(day));
    if (commonDays.length === 0) {
      return;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
    const newInterval = newAvailability.rules.interval;
    const existingInterval = existingAvailability.rules.interval;

    const newStart = dayjs(
      `2025-01-01T${newInterval.start_time}:00`,
      'YYYY-MM-DDTHH:mm:ss',
      newAvailability.timezone,
    );
    const newEnd = dayjs(
      `2025-01-01T${newInterval.end_time}:00`,
      'YYYY-MM-DDTHH:mm:ss',
      newAvailability.timezone,
    );
    const existingStart = dayjs(
      `2025-01-01T${existingInterval.start_time}:00`,
      'YYYY-MM-DDTHH:mm:ss',
      existingAvailability.timezone,
    );
    const existingEnd = dayjs(
      `2025-01-01T${existingInterval.end_time}:00`,
      'YYYY-MM-DDTHH:mm:ss',
      existingAvailability.timezone,
    );

    if (
      newStart.isBefore(existingEnd) &&
      newEnd.isAfter(existingStart)
    ) {
      throw new BadRequestException(
        `Infinite recurrence of new availability intersects with existing availability ${existingAvailability.id} on days ${commonDays.join(', ')}`,
      );
    }
  }
}
```

---

### 5. **–û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

1. **–ú–µ—Ç–æ–¥ `validateAvailability`**:
   - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç `Availability` –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –µ–≥–æ –Ω–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏.
   - –í—ã–ø–æ–ª–Ω—è–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (`venueId`/`spaceId`, `timezone`, `valid_from_utc`, `duration_minutes`).

2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ (`generateIntervals`)**:
   - –î–ª—è –Ω–æ–≤–æ–≥–æ `Availability`: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –Ω–∞ 1 –≥–æ–¥ –≤–ø–µ—Ä—ë–¥ –æ—Ç `dtstart`.
   - –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö `Availability`: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –Ω–∞ 2 –≥–æ–¥–∞ (–æ—Ç `dtstart - 1 –≥–æ–¥` –¥–æ `dtstart + 1 –≥–æ–¥`).
   - –£—á–∏—Ç—ã–≤–∞–µ—Ç `timezone` –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç `startDateTime` –∏ `endDateTime` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `start_time` –∏ `end_time`.

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π**:
   - –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –∫–∞–∂–¥—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –Ω–æ–≤–æ–≥–æ `Availability` —Å –∫–∞–∂–¥—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ.
   - –ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ: `start1 <= end2 && start2 <= end1`.
   - –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞.

4. **–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π (`checkInfiniteIntersections`)**:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å–ª–∏ –Ω–æ–≤—ã–π –∏–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `Availability` –∏–º–µ–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è (`until` –∏ `count` –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç).
   - –£—Å–ª–æ–≤–∏—è –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è:
     - –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ `frequency` –∏ `interval`.
     - –ù–∞–ª–∏—á–∏–µ –æ–±—â–∏—Ö –¥–Ω–µ–π –≤ `byweekday`.
     - –ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ `[start_time, end_time]` –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–∞—Ö.
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∏–∫—Ç–∏–≤–Ω—É—é –¥–∞—Ç—É (`2025-01-01`) –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏.

5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤**:
   - `timezone` –∏–∑ `Availability` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ (`RRule` —Å `tzid`).
   - –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è –≤ UTC –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å —É—á—ë—Ç–æ–º `timezone`.

---

### 6. **–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã**

#### –ù–æ–≤—ã–π `Availability`
```json
{
  "venueId": null,
  "spaceId": "944c3959-0f4c-4286-be30-1eb7c72dc76d",
  "timezone": "Europe/Moscow",
  "rules": {
    "interval": {
      "start_time": "00:30",
      "end_time": "01:30",
      "valid_from": "2025-05-03T00:30:00",
      "valid_from_utc": "2025-05-02T21:30:00.000Z",
      "duration_minutes": 60
    },
    "recurrence_rule": {
      "dtstart": "2025-05-02T21:30:00.000Z",
      "until": null,
      "interval": 1,
      "byweekday": ["SA", "SU"],
      "frequency": "WEEKLY"
    }
  }
}
```

#### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π `Availability`
(–ò–∑ –≤–∞—à–µ–≥–æ –ø—Ä–∏–º–µ—Ä–∞: `00:00`‚Äì`01:00`, `SA`, `SU`, `Europe/Moscow`).

#### –û–±—Ä–∞–±–æ—Ç–∫–∞
- **–ù–æ–≤—ã–π `Availability`**:
  - –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –Ω–∞ –≥–æ–¥: `2025-05-03T00:30:00+03:00` ‚Äì `2025-05-03T01:30:00+03:00`, `2025-05-04T00:30:00+03:00` ‚Äì `2025-05-04T01:30:00+03:00`, ...
- **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–π `Availability`**:
  - –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã: `2025-05-03T00:00:00+03:00` ‚Äì `2025-05-03T01:00:00+03:00`, `2025-05-04T00:00:00+03:00` ‚Äì `2025-05-04T01:00:00+03:00`, ...
- **–ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ**:
  - `2025-05-03T00:30:00+03:00` ‚Äì `2025-05-03T01:30:00+03:00` –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è —Å `2025-05-03T00:00:00+03:00` ‚Äì `2025-05-03T01:00:00+03:00`.
  - –í—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ.

- **–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞**:
  - –û–±–∞ `Availability` –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ (`until: null`).
  - `frequency: WEEKLY`, `interval: 1` —Å–æ–≤–ø–∞–¥–∞—é—Ç.
  - –û–±—â–∏–µ –¥–Ω–∏: `SA`, `SU`.
  - –í—Ä–µ–º—è: `[00:30, 01:30]` –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è —Å `[00:00, 01:00]`.
  - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ.

#### –†–µ–∑—É–ª—å—Ç–∞—Ç
```typescript
throw new BadRequestException(
  `New availability intersects with existing availability deffb4e4-59f4-4d1b-8bcf-7c9b02404646 at 2025-05-03T00:30:00.000+03:00`,
);
```

---

### 7. **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**:
   - –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∞—Ç –≤ `rule.between` —Å –ø–æ–º–æ—â—å—é `count` –∏–ª–∏ –º–µ–Ω—å—à–µ–≥–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 6 –º–µ—Å—è—Ü–µ–≤), –µ—Å–ª–∏ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–¥—ë–∂–Ω–∞.
   - –ö—ç—à–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö `Availability`.

2. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª**:
   - –ï—Å–ª–∏ `recurrence_rule` –≤–∫–ª—é—á–∞–µ—Ç `bymonthday`, `bysetpos`, —Ä–∞—Å—à–∏—Ä—å—Ç–µ `checkInfiniteIntersections` –¥–ª—è –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏.

3. **–ß–∞—Å–æ–≤—ã–µ –ø–æ—è—Å–∞**:
   - –ï—Å–ª–∏ `Availability` –º–æ–≥—É—Ç –∏–º–µ—Ç—å —Ä–∞–∑–Ω—ã–µ `timezone`, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ —É—á–∏—Ç—ã–≤–∞–µ—Ç —ç—Ç–æ (—Ç–µ–∫—É—â–∏–π –∫–æ–¥ —É–∂–µ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ —á–µ—Ä–µ–∑ `.tz(timezone)`).

4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**:
   - –î–æ–±–∞–≤—å—Ç–µ –≤ Swagger/OpenAPI –æ–ø–∏—Å–∞–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:
     ```typescript
     @ApiOperation({
       summary: 'Create Availability',
       description: 'Creates a new availability, validating no intersections with existing availabilities.',
     })
     ```

5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - –†–∞–∑–æ–≤—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã.
   - –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è —Å —Ä–∞–∑–Ω—ã–º–∏ `byweekday`.
   - –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã, –ø–µ—Ä–µ—Ö–æ–¥—è—â–∏–µ —á–µ—Ä–µ–∑ –ø–æ–ª—É–Ω–æ—á—å.
   - –†–∞–∑–Ω—ã–µ —á–∞—Å–æ–≤—ã–µ –ø–æ—è—Å–∞ (`Europe/Moscow` vs `America/New_York`).

6. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**:
   - –í—ã–∑—ã–≤–∞–π—Ç–µ `validateAvailability` –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –±–∞–∑–µ:
     ```typescript
     async createAvailability(availability: Availability): Promise<Availability> {
       await this.validateAvailability(availability);
       return this.prisma.availability.create({ data: availability });
     }
     ```

---

### 8. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤**

| **–í–∞—Ä–∏–∞–Ω—Ç**                       | **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | **–ü–æ–ª–Ω–æ—Ç–∞**           | **–°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏** | **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π** |
| --------------------------------- | ---------------------- | --------------------- | ------------------------ | --------------------------------------- |
| –í–∞—à –ø–æ–¥—Ö–æ–¥ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞ –≥–æ–¥/–¥–≤–∞) | –°—Ä–µ–¥–Ω—è—è                | –í—ã—Å–æ–∫–∞—è (–≤ –≥–æ—Ä–∏–∑–æ–Ω—Ç–µ) | –°—Ä–µ–¥–Ω—è—è                  | –ù–µ—Ç (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω –≥–æ—Ä–∏–∑–æ–Ω—Ç–æ–º)              |
| –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞            | –í—ã—Å–æ–∫–∞—è                | –°—Ä–µ–¥–Ω—è—è               | –í—ã—Å–æ–∫–∞—è                  | –î–∞                                      |
| –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –≥–æ—Ä–∏–∑–æ–Ω—Ç + –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ | –°—Ä–µ–¥–Ω—è—è                | –í—ã—Å–æ–∫–∞—è               | –°—Ä–µ–¥–Ω—è—è                  | –î–∞                                      |
| –•—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –≤ –ë–î          | –í—ã—Å–æ–∫–∞—è                | –í—ã—Å–æ–∫–∞—è               | –í—ã—Å–æ–∫–∞—è                  | –ù–µ—Ç (–Ω—É–∂–Ω–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞)                   |
| –õ–µ–Ω–∏–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞                  | –í—ã—Å–æ–∫–∞—è                | –ù–∏–∑–∫–∞—è                | –ù–∏–∑–∫–∞—è                   | –ù–µ—Ç                                     |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –í–∞—Ä–∏–∞–Ω—Ç 2 (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –≤—ã—à–µ) ‚Äî –ª—É—á—à–∏–π –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é, –ø–æ–ª–Ω–æ—Ç–æ–π –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å—é.

---

### 9. **–ò—Ç–æ–≥**

- **–í–∞—à –ø–æ–¥—Ö–æ–¥**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –Ω–∞ –≥–æ–¥/–¥–≤–∞ –≥–æ–¥–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π ‚Äî —Ä–∞–±–æ—á–∏–π, –Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –≥–æ—Ä–∏–∑–æ–Ω—Ç–æ–º –∏ –∑–∞—Ç—Ä–∞—Ç–µ–Ω.
- **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã**:
  - –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª (–±—ã—Å—Ç—Ä–∞—è, –Ω–æ —Å–ª–æ–∂–Ω–∞—è –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª).
  - –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥).
  - –•—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –≤ –ë–î (–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ö–µ–º—ã).
  - –õ–µ–Ω–∏–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–ø—Ä–æ—Å—Ç–∞—è, –Ω–æ –Ω–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã).
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
  - –ú–µ—Ç–æ–¥ `validateAvailability` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –Ω–∞ –≥–æ–¥ –¥–ª—è –Ω–æ–≤–æ–≥–æ `Availability`, –Ω–∞ –¥–≤–∞ –≥–æ–¥–∞ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö, –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è.
  - –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç `frequency`, `interval`, `byweekday` –∏ `[start_time, end_time]`.
- **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏**:
  - –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ `validateAvailability` –≤ –º–µ—Ç–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è `Availability`.
  - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å —Ä–∞–∑–Ω—ã–º–∏ `timezone`, –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏.

–ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π, –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª (`bymonthday`), –∏–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –Ω–∞–ø–∏—à–∏—Ç–µ, –∏ —è –∞–¥–∞–ø—Ç–∏—Ä—É—é —Ä–µ—à–µ–Ω–∏–µ!